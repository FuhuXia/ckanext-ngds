{% import 'macros/form.html' as form %}
{% macro is_selected(value,key,extra) %}
  {% for extra in extras %}
    {% if extra.key == key %}
      {% if extra.value == value %}
        selected
      {% endif %}
    {% endif %}
  {% endfor %}
{% endmacro %}
{% include 'package/add_responsible_party.tmf' %}
        {% macro get_value(key,extra) -%}
  {% for extra in extras -%}
    {% if extra.key == key -%}
      {{ extra.value }}
    {%- endif %}
  {%- endfor %}
{%- endmacro %}
<div class="form-body">
 
  <!-- <div class="input-group">
    <div class="sp-label"><label>Author Email</label></div>
      <input type="text" name="author_email" placeholder="joe@example.com" value="{{data.author_email}}"></input>
  </div> -->

  <!-- <div class="input-group">
    <div class="sp-label"><label>Maintainer Email</label></div>
      <input type="text" name="maintainer_email" placeholder="joe@example.com" value="{{data.maintainer_email}}"></input>
  </div> -->
  {% if pkg_name %}
  <input name="pkg_name" type="hidden" value="{{pkg_name}}"/>
  {% elif data.pkg_name %}
  <input name="pkg_name" type="hidden" value="{{ data.pkg_name}}"/>
  {% endif %}
  <input type="hidden" name="author" value="{{ data.author }}"/>
  <input type="hidden" name="author_email" value="{{ data.author_email }}"/>

  <div class="input-group">
    <div class="sp-label"><label>{{_('Visibility')}}</label></div>
      <select id="field-private" name="private">
        <option value="True" {% if data.private==True%}selected{% endif %}>{{_('Private')}}</option>
        <option value="False" {% if data.private==False%}selected{% endif %}>{{_('Public')}}</option>
      </select>
  </div>

  <div class="input-group">
    <div class="sp-label"><label>{{_('Dataset Extent')}}</label></div>
      <div id="bbox-map"></div>
  </div>

<link rel="stylesheet" href="/vendor/leaflet/leaflet.css" />
<link rel="stylesheet" href="/vendor/leaflet-draw/leaflet.draw.css" />
<script type="application/javascript" src="/vendor/leaflet/leaflet.js"></script>
<script type="application/javascript" src="/vendor/leaflet-draw/leaflet.draw.js"></script>
<script type="text/javascript" src="/scripts/autocomplete.js"></script>
<script type="application/javascript" src="/scripts/dataset_entry_map.js"></script>
<script type="application/javascript" src="/scripts/contribute/responsible_party.js"></script>

<script>

</script>


{% block custom_fields %}
  {% snippet 'snippets/custom_form_fields.html', extras=data.extras,data=data, errors=errors, limit=3, pkg_dict=pkg_dict %}
{% endblock %}

</div>

{% if data %}
<script>
  // var v_collect = ngds.util.parse_raw_json("{{h.jsonify(data)}}");
</script>
{% endif %}

