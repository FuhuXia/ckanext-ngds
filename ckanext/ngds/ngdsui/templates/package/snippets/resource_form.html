
{{ data }}

<script>
{% if data %}
    form_type_v = "{{data['form_type']}}";
    resource_location = window.location.origin+"{{data['resource_location']}}";
{% else %}
  form_type_v = '';
{% endif %}
</script>
<form id="file-upload-form" action="/ngds/contribute/upload_file" method="post" enctype="multipart/form-data">
  <div id="file-upload" style="display:none;">
          <input type="submit" name="file-upload-button" value="Upload"></input>
          <input type="file" id="file" name="file" class="structured-input"></input>
          {% if data['key'] %}
          <input type="hidden" name="key" id="key1" value="{{data['key']}}"></input>
          {% else %}
          <input type="hidden" name="key" id="key1"></input>
          {% endif %}
          <input type="hidden" name="dataset_name" value="{{pkg_name}}"/>
          <input type="hidden" name="form-type" id="form_type"/>
  </div>
</form>

<form class="dataset-form dataset-resource-form form-horizontal" action="/ngds/contribute/create_or_update_resource" method="post" data-module="resource-form basic-form">
  <ol class="stages stage-2">
    <li class="first-stage complete">
        <button class="highlight" name="save" value="go-dataset" type="submit">1. Create dataset</button>
    </li>
    <li class="middle-stage active">
        <span class="highlight">2. Add Resources</span>
    </li>
    <li class="last-stage uncomplete">
        <span class="highlight">3. Dataset Metadata</span>
    </li>
  </ol>

  <div class="main-controls">
      <div class="radio-section">
        <input type="hidden" name="dataset_name" value="{{pkg_name}}"/>
        <input type="radio" id="upload-type-selection" name="upload_type_selection" value="upload_type"/>
        <label for="upload-type-selection">Upload a file</label><br/>
        &nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" id="upload-type-structured" class="upload-type" name="upload-type" value="structured"/>
        <label for="upload-type-structured" id="upload-type-structured-label">Structured</label><br/>
        &nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" id="upload-type-unstructured" class="upload-type" name="upload-type" value="unstructured"/>
        <label for="upload-type-unstructured" id="upload-type-unstructured-label">Unstructured</label>
      </div>

      <div class="radio-section">
        <input type="radio" id="data-service" name="upload_type" value="data-service" />
        <label for="data-service">Link to a data service</label>
      </div>

      <div class="radio-section">
        <input type="radio" id="offline-resouece" name="upload_type" value="offline-resource" />
        <label for="offline-resource">Offline resource</label>
      </div>
  </div>

  <div class="form-body">
    
    <div class="structured-form" style="display:none;">
      
      <div class="input-group">
        <div class="sp-label"><label for="url">Link to resource</label></div>
          <input type="text" name="url" id="url" class="structured-input"></input>
      <div class="input-group">
        <div class="sp-label"><label for="name">Name</label></div>
        <input type="text" name="name" id="name" class="structured-input"></input>
      </div>

      <div class="input-group">
        <div class="sp-label"><label for="content-model">Content Model</label></div>
        <select name="content_model" id="content_model" class="structured-input">
          <option value="None">None</option>
        </select>
      </div>

      <div class="cm-v-marker" style="display:none;"></div>
     <!--  <div class="input-group content-model-version-marker">
        <div class="sp-label"><label for="content-model-version">Version</label></div>
        <select name="content_model_version" id="content_model_version" class="structured-input"></select>
      </div> -->

       <div class="input-group">
        <div class="sp-label description-label-div"><label for="description">Description</label></div>
        <textarea rows="4" cols="1" name="description" id="description" class="structured-input"></textarea>
      </div>

       <div class="input-group">
        <div class="sp-label"><label for="format">Format</label></div>
        <input type="text" name="format" id="format" class="structured-input"></input>
      </div>
      <input type="hidden" name="id" value=""></input>
      {% if data['key'] %}
      <input type="hidden" name="key" id="key2" value="{{data['key']}}"></input>
      {% else %}
      <input type="hidden" name="key" id="key2"></input>
      {% endif %}
    </div> 

  </div>

  <div class="form-actions">
    <button type="submit" name="save" value="go-dataset">Previous Page</button>
    <button type="submit" name="save" value="go-dataset">Save and Add Another</button>
    <button type="submit" name="save" value="go-metadata">Additional Metadata</button>
</div>
</form>

<script type="text/javascript" src="/scripts/contribute/resource_form.js"></script>