{% extends "page_ngds.html" %}
{% set active_page = "map" %}

{%- block content %}

<div style="position:relative; height:100%;">
	<div class="map-search dialog-small-map" style="float:left;">
		<form action="javascript:ngds.Map.top_level_search()">
			<fieldset>
				{% if c.query %}
				<input id="map-query" type="text" placeholder="Geothermal Texas" value="{{ c.query }}"/>
				{% else %}
				<input id="map-query" type="text" placeholder="Geothermal Texas"/>
				{% endif %}
				<input id="map-search" type="button" value="Go"/>
			</fieldset>
		</form>

	</div>

	<div id="map-container" style=""></div>
	<div class="map-search-results">
		<div id="results" class="results">
			
		</div>
		<div class="search-results-pagination">
				<div class="search-results-page-nums"></div>
		</div>
		<div class="map-expander">

		</div>
		
	 </div>	
</div>
<!-- <div id="temporary-wms-div" style="position:absolute; bottom:0px; left:0px; background-color:#dadada; width:310px;">
	<label for="wms" style="font-family:arial; font-size:12px;">Temporary WMS viewer</label>
	<input name="wms" type="text" id="wms" style="width:150px;">
</div> -->
{% endblock %}
{% block styles %}
{{ super() }}
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.2/leaflet.css" />
	<!-- <link rel="stylesheet" href="/vendor/leaflet/leaflet.css" /> -->
	<link rel="stylesheet" href="/vendor/leaflet-draw/leaflet.draw.css" />

	<link rel="stylesheet" href="/vendor/iconlabel/leaflet.iconlabel.css" />
	<link rel="stylesheet" href="/vendor/jscrollpane/jquery.jscrollpane.css" />
	<link rel="stylesheet" href="/vendor/Leaflet.Fullscreen/Control.FullScreen.css" />
{% endblock %}
{% block scripts %}
<script type="text/javascript" src="/scripts/scripts.js"></script>
  <script src="http://cdn.leafletjs.com/leaflet-0.6.2/leaflet.js"></script>
<!--	<script type="application/javascript" src="/vendor/leaflet/leaflet.js"></script> -->
  <script type="application/javascript" src="/vendor/leaflet-draw/leaflet.draw.js"></script>
  <script type="text/javascript" src="/vendor/zoomfs/leaflet.zoomfs.js"></script>
  <script type="text/javascript" src="/vendor/iconlabel/leaflet.iconlabel.js"></script>
  <script type="text/javascript" src="/scripts/map/L.TileLayer.EsriImageExports.js"></script>
  <script type="text/javascript" src="/vendor/geosearch/src/js/l.control.geosearch.js"></script>
  <script type="text/javascript" src="/vendor/geosearch/src/js/l.geosearch.provider.openstreetmap.js"></script>

  <!-- // <script type="text/javascript" src="/vendor/jscrollpane/jquery.jscrollpane.min.js"></script> -->
  <script type="text/javascript" src="http://jscrollpane.kelvinluck.com/script/jquery.jscrollpane.min.js"></script>
  <script type="text/javascript" src="/vendor/jscrollpane/jquery.mousewheel.js"></script>
  <script type="text/javascript" src="/vendor/jscrollpane/mwheelIntent.js"></script>
 // <script type="text/javascript" src="/vendor/Leaflet.Fullscreen/Control.FullScreen.js"></script>
    <script type="text/javascript" src="/vendor/PubSubJS/pubsub.js"></script>
    <script type="text/javascript" src="/scripts/map/ngds_map.js"></script>
    <script type="text/javascript" src="/scripts/map/pager.js"></script>
    <script type="text/javascript" src="/scripts/map/main.js"></script>
  <script type="text/javascript" src="/vendor/TinyScrollbar/tinyscrollbar.js"></script>
  <script type="text/javascript" src="/scripts/ckanlib/CKANDataset.js"></script>
  <script type="text/javascript" src="/scripts/ckanlib/ckanlib.js"></script>
  
  <script type="text/javascript" src="/scripts/map/bounding_box.js"></script>
  <script type="text/javascript" src="/scripts/ckanlib/search_result.js"></script>
  <script type="text/javascript" src="/scripts/map/ZoomHandler.js"></script>
  <script type="text/javascript" src="/scripts/map/result_parser.js"></script>
  <script type="text/javascript" src="/scripts/notifications/handlers.js"></script>

	{% if c.query %}
<script>
	console.log("Initiating search");
	ngds.Map.top_level_search();
</script> 
{% endif %}
{% endblock %}   