<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Flot Examples: Basic Usage</title>
	<link href="examples.css" rel="stylesheet" type="text/css">
	<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="../../excanvas.min.js"></script><![endif]-->
	<script language="javascript" type="text/javascript" src="scripts/flot/jquery.js"></script>
	<script language="javascript" type="text/javascript" src="scripts/flot/jquery.flot.js"></script>
	<script language="javascript" type="text/javascript" src="scripts/flot/jquery.flot.categories.js"></script>
	<script type="text/javascript">
	
	
	function plot_histogram(style, config, data) {
		
		var style_obj= $.parseJSON(style);
		var config_obj= $.parseJSON(config);
		
		var lower= config_obj.lower;
		var upper= config_obj.upper;;
		var num_bins= config_obj.num_bins;
		var precision= style.precision;
		
		var bins= new Array();
		var bin_width= (upper - lower + 1) / num_bins;
		var ignore_counter= 0;

		console.log('precision: ' + precision);
		
		// initialize the Bins 
		for (i= 0; i<num_bins-1; i++) {
			bins[i]= [ "[" + (i*bin_width).toPrecision(precision) + "-" + ((i+1)*bin_width).toPrecision(precision) + "[", 0 ];
		}
		
		i= num_bins-1;
		bins[i]= [ "[" + (i*bin_width).toPrecision(3) + "-" + ((i+1)*bin_width).toPrecision(3) + "]", 0 ];
		
		// fill the Bins 
		for (i= 0; i<data.length; i++) {
			pos= Math.floor(data[i] / bin_width);
			// we include the upper boundary in the last bin 
			if (pos==num_bins) {
				pos= num_bins-1;
			}
			// anything beyond the last bin is ignored 
			if (pos <= num_bins) {
				// console.log("d: " + data[i] + " \t pos: " + pos);
				bin= bins[pos];
				bin[1]++;
			} else {
				ignore_counter++;
			}
		}		
		$.plot("#placeholder", [ bins ], {
			series: {
				bars: {
					show: true,
					barWidth: 0.6,
					align: "center"
				}
			},
			xaxis: {
				mode: "categories",
				tickLength: 0
			}
		});		
	}

	// Base Data
	var data = [10, 8, 4, 1, 7, 8, 2, 10, 8, 5, 6, 5, 6, 5, 9];
	var style= '{ "precision": "3" }';
	var config= '{ "type": "linear", "lower": 1, "upper": 10, "num_bins": 4 }';
	
	function updateHistogram() {
		
		style= '{ "precision": ' + $('#i_precision').val() + ' }';
		config= '{ "type": "linear", "lower": 1, "upper": 10, "num_bins": ' + $('#i_numBins').val() + ' }';
		plot_histogram(style, config, data);
	}
	
	
	$(function() {
		plot_histogram(style, config, data);
		
		// Add the Flot version string to the footer

		$("#footer").prepend("Flot " + $.plot.version + " &ndash; ");
	});
	</script>
</head>
<body>
	<div id="header">
		<h2>Basic Usage</h2>
	</div>

	<div id="content">

		<div class="demo-container">
			<div id="placeholder" class="demo-placeholder"></div>
		</div>

		<div id="" class="demo-config">
			<form name="histo_config" action="javascript:updateHistogram()">
				<table><tbody>
				<tr><td><label>Precision:</label></td><td><input id="i_precision"    type="number" value="3"/></td></tr>
				<tr><td><label>Lower Boundary:</label></td><td><input id="i_lower"   type="number"/></td></tr>
				<tr><td><label>Upper Boundary:</label></td><td><input id="i_upper"   type="number"/></td></tr>
				<tr><td><label>Number of Bins:</label></td><td><input id="i_numBins" type="number"/></td></tr>
				<tr><td><label>Type:</label></td><td>
				<select id="s_type" name="select_type">
					<option>linear</option>
					<option>logarithmic</option>
				</select></td></tr>
				</tbody></table>
				<input name="Submit" type="submit" value="Update"/>
			</form>
		</div>
	</div>

	<div id="footer">
		Copyright &copy; 2007 - 2013 IOLA and Ole Laursen
	</div>

</body>
</html>
